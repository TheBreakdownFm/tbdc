

<!--Layout Templates-->
<template name="ApplicationLayout">
    <div class="navbar navbar-inverse  navbar-static-top" role="navigation">
      <div class="navbar-header">
        <a class="navbar-brand" href="#">TheBreakdown.fm</a>
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
            <li>{{#linkTo route='classifieds'}}Classifieds{{/linkTo}}</li>
            {{#if currentUser}}
            <li>{{#linkTo route='classifieds.mine'}}My Ads{{/linkTo}}</li>
            <li>{{#linkTo route='classified.new'}}Post a new Ad{{/linkTo}}</li>
            {{/if}}
        </ul>
        <ul class="nav navbar-nav navbar-right">
          {{> loginButtons}} <!-- here -->
        </ul>
      </div>
    </div>
  <div class="container">
    <aside>
      {{> yield "aside"}}
    </aside>
      {{> yield}}

    <footer>
      {{> yield "footer"}}
    </footer>
  </div>
</template>

<!--Route Templates-->

<!--Classifieds-->


<template name="ClassifiedsStubList">
  <div class="classi-stub-list">
      {{#each classifieds}}
      {{> ClassifiedStub}}
      {{/each}}
  </div>
</template>

<template name="allClassifieds">
  <h2>Classifieds - Everything</h2>
  <nav>
    {{#linkTo route='classifieds.cars'}}Just Cars{{/linkTo}}
    {{#linkTo route='classifieds.parts'}}Just Parts{{/linkTo}}
  </nav>

  {{> ClassifiedsStubList}}
</template>

<template name="CarClassifieds">
  <h2>Classifieds - Cars</h2>
  <nav>
    {{#linkTo route='classifieds'}}Everything{{/linkTo}}
    {{#linkTo route='classifieds.parts'}}Just Parts{{/linkTo}}
  </nav>
  {{> ClassifiedsStubList}}
</template>

<template name="PartClassifieds">
  <h2>Classifieds - Parts</h2>
  <nav>
    {{#linkTo route='classifieds'}}Everything{{/linkTo}}
    {{#linkTo route='classifieds.cars'}}Just Cars{{/linkTo}}
  </nav>
  {{> ClassifiedsStubList}}
</template>

<template name="ClassifiedsMine">
  <h2>My Classifieds</h2>
    {{#each classifieds}}
    {{> ClassifiedStub}}
    {{/each}}
</template>

<template name="ClassifiedNew">
  {{#if currentUser}}
  {{> newClassifiedForm }}
  {{else}}
  You've got to be signed if you want to post new stuff. Look at the top of the page for a "Sign In" button. If you haven't already got an account you can sign up on that same form as well.
  {{/if}}
</template>

<template name="ClassifiedEdit">
  {{>editClassifiedForm}}
</template>

<template name="ClassifiedEditImages">
  <button class="images-done-button">
    Done
  </button>
  {{>GeneralClassiUploader}}
  {{>ClassifiedImagesShow}}
</template>


<template name="ClassifiedImagesShow">
  <div class="classi-images">
    <h4>Images</h4>
    {{#each images}}
    {{>ClassiImageShow}}
    {{/each}}
  </div>
</template>

<Template name="ClassiImageShow">
  <img src="{{imageUrlForImageId}}" alt="{{imageUrlForImageId}}" >
  <button class="delete-image-button"> Remove This Image </button>
</template>



<template name="GeneralClassiUploader">
  <form id="upload">
    <div class="upload-images">
      <p>The image at the top of this list will be the one that
        shows up when your ad is displayed in a list.</p>
      <div class="alert alert-success">
        <span>Pick a file..</span>
      </div>

      <input type="file">
    </div>

  </form>
</template>

<template name="ClassifiedShow">
  <div>

    {{> ClassifiedDetailView}}
    {{#if isClassifiedOwner}}
    <div class="ownerStuff">
      <button class="edit-button">Edit</button>
    </div>
    {{else}}
    {{#if okMakeNewOffer}}
    {{> OfferNew}}
    {{/if}}
    {{/if}}
    {{#if currentUser}}
    {{> OffersView}}
    {{else}}
    {{> Yuno}}
    {{/if}}

  </div>
</template>


<template name="Yuno">
  <div class="encourage-sign-up">
    People who are logged in can make offers. Y u no sign up?
  </div>
</template>

<template name="BuyerOffers">
  {{#each offer}}
  {{> OfferShow}}
  {{/each}}
</template>

<template name="ClassifiedDetailView">
  <h2>{{title}} - {{formatusd asking}} - Created {{reldate createdAt}}</h2>
  <h5>Type: {{adType}}</h5>
  <img src="{{firstImage}}">
  <h3>posted by {{username}} : {{#if posted}}posted{{/if}}</h3>
  <p>{{desc}}</p>
  <h4>Known Issues</h4>
  <p>{{problems}}</p>
  <h4>Mods</h4>
  <p>{{mods}}</p>
  {{#if willship}}
  <h4>Willing to ship under conditions:</h4>
  <p>{{shiprestric}}</p>
  {{else}}
  <h4>Local Pickup Only</h4>
  {{/if}}

  <h3>Images</h3>
  {{#each image in images}}
  <img src="{{image}}">
  {{/each}}

</template>

<template name="editClassifiedForm">
  <div class="edit-classi-view">
    <h2>Edit ad created {{reldate createdAt}}</h2>
    <div class="classi-builder">
      <form class="classified-fields">
        {{> ClassifiedFields}}
        <button class="save-button btn btn-primary">Done here, now on to images.</button>
      </form>
      <button class="delete-button btn">Delete this whole thing!</button>
    </div>
    <!--<div class="classi-preview">-->
    <!--<h2>Live Preview</h2>-->
    <!--{{> ClassifiedShow}}-->
    <!--</div>-->
  </div>
</template>


<template name="ClassifiedFields">
  <div class="form-group">
    <label>
      Title
      <input type="text" class="form-control"
             name="title" value="{{title}}" placeholder="Title this item"
             />
    </label>
  </div>
  <div class="form-group">
    <label>
      What are you selling?
      <select name="adType"
              class="adtype-input form-control">
        <option value="car" {{adTypeSelected "car" adType}} >Car</option>
        <option value="part" {{adTypeSelected "part" adType}}>Part</option>
      </select>
    </label>
  </div>
  <div class="checkbox">
    <label>
      <input type="checkbox"
             name="posted"
             checked="{{posted}}"
             class="toggle-posted"/>
      Posted
    </label>
  </div>
  <div class="form-group">
    <label>
      Asking Price
      <input type="number"
             name="asking"
             value="{{asking}}"
             class="asking-input form-control" />
    </label>
  </div>
  <div class="checkbox">
    <label>
      <input type="checkbox"
             name="willship"
             checked="{{willship}}"
             class="toggle-willship"/>
      Willing to Ship?
    </label>
  </div>
  {{#if isShippy}}
  {{> ShippyFields}}
  {{/if}}
  <div class="form-group">
    <label>
      Description
      <textarea name="desc"
                class="form-control"
                value="{{desc}}"
                placeholder="Describe the item here..."></textarea>
    </label>
  </div>
  {{#if isCar}}
  <div class="form-group">
    <label>
      Known Problems
      <textarea name="problems"
                class="form-control"
                value="{{problems}}"
                placeholder="Describe any known issues here..."></textarea>
    </label>
  </div>
  <div class="form-group">
    <label>
      Mods
      <textarea name="mods"
                value="{{mods}}"
                class="form-control"
                placeholder="Describe modifications
                             that have been
                             done here
                             ..."></textarea>
    </label>
  </div>
  {{/if}}
  <!-- Not yet implemented fields -->
  <!--
      <label>
        Trades Considered?
        <input type="checkbox"
               name="fortrade"
               value="{{fortrade}}"
               class="toggle-fortrade"/>
      </label>
      <br>
      <label>
        Trade Looking For?
        <br>
        <textarea name="tradelookingfor"
                  class="tradelookingfor"
                  value="{{tradelookingfor}}"
                  placeholder="Description or key words that you're looking
                               for in trade"></textarea>
      </label>
      <br>
      <label>
        SKU
        <br>
        <input type="text" name="sku" value="{{sku}}" class="sku-input"/>
      </label>
      -->

</template>

<template name="ShippyFields">
  <div class="form-group">
    <label>
      Shipping Restrictions
      <textarea name="shiprestric"
                class="form-control"
                value="{{shiprestric}}"
                placeholder="Describe any special conditions for
                             shipping here..."></textarea>
    </label>
  </div>
</template>


<template name="newClassifiedForm">
  <form class="classified-fields">
    {{> ClassifiedFields}}
    <button class="save-button btn">Done here, now time for images.</button>
  </form> 
</template>

<template name="ClassifiedStub">
  <div class="classified-stub row well">
    <div class="col-sm-12 col-md-6">
      <h4>
        <a href="{{pathFor route='classified.show'}}">
          {{title}} - {{formatusd asking}} - Created {{reldate createdAt}}
        </a>
      </h4>
      <h5>{{adType}}</h5>
    </div>
    <div class="col-xs-6">
            <img class="classified-stub-image" src="{{firstImage}}">
    </div>
  </div>
</template>

<!--Offer Templates-->

<template name="OfferNew">
  <div class="new-offer-form">
  <form class="new-offer-form">
    <div class="form-group">
    <input type="number" class="form-control"  name="amnt" value="{{amnt}}"
           placeholder="Offer Amount"/>
    </div>
    <div class="form-group">
    <input type="text" name="msg" class="form-control" value="{{msg}}"
           placeholder="Message, be nice."/>
    </div>
    <button class="btn new-offer-button">#dealwithit</button>
  </form>
  </div>
i can haz?</template>

<template name="OffersView">
  {{#each offersForClassi}}
  {{> OfferShow}}
  {{/each}}
</template>

<template name="OfferThread">
  {{#each offer}}
  offer
  {{/each}}
</template>

<template name="OfferThreads">
  {{#each thread}}
  offer exists
  {{/each}}
</template>

<template name="OfferShow">
  <div>
    {{#if isSender}}
    <h2>Offer from You of ${{amnt}}</h2>
    {{reldate createdAt}}<br>
    You Offered: {{amnt}} <br>
    You Said: {{msg}}<br>
    {{else}}
    <h2>Offer from {{createdByUname}} of ${{amnt}} </h2>
    {{reldate createdAt}}<br>
    They Offered: {{amnt}}<br>
    They Said: {{msg}}<br>
    {{#if okToCounter}}
    <form class="counter-offer-form">
      <div class="form-group">
        <input type="number" name="amnt" value="{{amnt}}"
               class="form-control"
             placeholder="Offer Amount"/>
      </div>
      <div class="formm-group">
        <input type="text" name="msg" value="{{msg}}"
               class="form-control"
             placeholder="Message, be nice."/>
      </div>
      <button class="btn make-counter-offer">How about...</button>
    </form>
    <button class="btn accept-offer-button">
      Deal!
    </button>
    {{/if}}
    {{/if}}

    Offer Status: {{status}}
  </div>
  <hr>
</template>

<template name="OfferSenderView">

</template>

<template name="OfferSellerView">
  Seller View Goes here
</template>
