

<!--Layout Templates-->
<template name="ApplicationLayout">
  <header>
    <h1>TBD.FM</h1>
    <Nav>
      {{> loginButtons }}
      {{#linkTo route='classifieds'}}Browse Classifieds{{/linkTo}}
      {{#if currentUser}}
      {{#linkTo route='classifieds.mine'}}My Ads{{/linkTo}}
      {{#linkTo route='classified.new'}}Post a new Ad{{/linkTo}}
      {{/if}}
    </Nav>

  </header>
  <aside>
    {{> yield "aside"}}
  </aside>
  <article>
    {{> yield}}
  </article>
  <footer>
    {{> yield "footer"}}
  </footer>
</template>

<!--Route Templates-->

<!--Classifieds-->

<template name="ClassifiedsStubList">
  <ul>
    {{#each classifieds}}
    {{> ClassifiedStub}}
    {{/each}}
  </ul>
</template>

<template name="allClassifieds">
  <h2>Browse Classifieds </h2>
  <h3>
    {{#linkTo route='classifieds.cars'}}Just Cars{{/linkTo}}
    {{#linkTo route='classifieds.parts'}}Just Parts{{/linkTo}}
  </h3>
  {{> ClassifiedsStubList}}
</template>

<template name="CarClassifieds">
  <h2>Browse Car Classifieds</h2>
  <h3>
    {{#linkTo route='classifieds'}}Cars & Parts{{/linkTo}}
    {{#linkTo route='classifieds.parts'}}Just Parts{{/linkTo}}
  </h3>
  {{> ClassifiedsStubList}}
</template>

<template name="PartClassifieds">
  <h2>Browse Part Classifieds</h2>
  <h3>
    {{#linkTo route='classifieds'}}Cars & Parts{{/linkTo}}
    {{#linkTo route='classifieds.cars'}}Just Cars{{/linkTo}}
  </h3>
  {{> ClassifiedsStubList}}
</template>

<template name="ClassifiedsMine">
  <h2>My Classifieds</h2>
  <ul>
    {{#each classifieds}}
    {{> ClassifiedStub}}
    {{/each}}
  </ul>
</template>

<template name="ClassifiedNew">
  {{#if currentUser}}
  {{> newClassifiedForm }}
  {{else}}
  You've got to be signed if you want to post new stuff. Look at the top of the page for a "Sign In" button. If you haven't already got an account you can sign up on that same form as well.
  {{/if}}
</template>

<template name="ClassifiedEdit">
  {{>editClassifiedForm}}
  {{>GeneralClassiUploader}}
  {{>ClassifiedImagesShow}}
</template>

<template name="ClassifiedImagesShow">
  <h4>Images</h4>
  {{#each images}}
  {{>ClassiImageShow}}
  {{/each}}
</template>

<Template name="ClassiImageShow">
  <img src="{{imageUrlForImageId}}" alt="{{imageUrlForImageId}}" >
  <button class="delete-image-button"> Remove This Image </button>
</template>



<template name="GeneralClassiUploader">
    <form id="upload">
      <div class="upload-images">
        <h5>Upload Image</h5>
        <p>The image at the top of this list will be the one that
          shows up when your ad is displayed in a list.</p>
        <div class="alert alert-success">
          <span>Pick a file..</span>
        </div>
        
        <input type="file">
      </div>
      
    </form>
</template>

<template name="ClassifiedShow">
  <div>

    {{> ClassifiedDetailView}}
    {{#if isClassifiedOwner}}
    <div class="ownerStuff">
      <button class="edit-button">Edit</button>
    </div>
    {{else}}
    {{#if okMakeNewOffer}}
    {{> OfferNew}}
    tesmade by test 2                {{/if}}
    {{/if}}
    {{#if currentUser}}
    {{> OffersView}}
    {{else}}
    {{> Yuno}}
    {{/if}}

  </div>
</template>


<template name="Yuno">
  <div class="encourage-sign-up">
    People who are logged in can make offers. Y u no sign up?
  </div>
</template>

<template name="BuyerOffers">
  {{#each offer}}
  {{> OfferShow}}
  {{/each}}
</template>

<template name="ClassifiedDetailView">
  <h2>{{title}} - ${{asking}}</h2>
  <h5>Type: {{adType}}</h5>
  <img src="{{firstImage}}">
  <h3>posted by {{username}} : {{#if posted}}posted{{/if}}</h3>
  <p>{{desc}}</p>
  <h4>Known Issues</h4>
  <p>{{problems}}</p>
  <h4>Mods</h4>
  <p>{{mods}}</p>
  {{#if willship}}
  <h4>Willing to ship under conditions:</h4>
  <p>{{shiprestric}}</p>
  {{else}}
  <h4>Local Pickup Only</h4>
  {{/if}}

  <h3>Images</h3>
  {{#each image in images}}
  <img src="{{image}}">
  {{/each}}
  
</template>

<template name="editClassifiedForm">
  <div class="edit-classi-view">
    <h2>Edit this shit</h2>
    <div class="classi-builder">
      <form class="classified-fields">
        {{> classifiedFields}}
        <button class="save-button">Save</button>
      </form>
      <button class="delete-button">Delete</button>
    </div>
    <!--<div class="classi-preview">-->
    <!--<h2>Live Preview</h2>-->
    <!--{{> ClassifiedShow}}-->
    <!--</div>-->
  </div>
</template>

<template name="classifiedFields">
  <label>
    Title
  <br>
    <input type="text"
           name="title" value="{{title}}" placeholder="Title this item"
           />
  </label>
  <br>
  <label>
    What are you selling?
  <br>
  <select name="adType"
          class="adtype-input">
      <option value="car" {{adTypeSelected "car" adType}} >Car</option>
      <option value="part" {{adTypeSelected "part" adType}}>Part</option>
    </select>
  </label>
  <br>
  <label>
    Posted
    <input type="checkbox"
           name="posted"
           checked="{{posted}}"
           class="toggle-posted"/>
  </label>
  <br>
  <label>
    Asking Price
  <br>
    <input type="number"
           name="asking"
           value="{{asking}}"
           class="asking-input" />
  </label>
  <br>
  <label>
    Willing to Ship?
    <input type="checkbox"
           name="willship"
           checked="{{willship}}"
           class="toggle-willship"/>
  </label>
  <br>
  <label>
    Shipping Restrictions
  <br>
    <textarea name="shiprestric"
              value="{{shiprestric}}"
              placeholder="Describe any special conditions for shipping
                           here..."></textarea>
  </label>
  <br>

  <label>
    Description
    <br>
    <textarea name="desc" value="{{desc}}" placeholder="Describe the item here..."></textarea>
  </label>
  <br>

  <label>
    Known Problems
    <br>
    <textarea name="problems" value="{{problems}}" placeholder="Describe
                                                               any known issues
                                                               here..."></textarea>
  </label>
  <br>

  
  <label>
    Mods
    <br>
    <textarea name="mods" value="{{mods}}" placeholder="Describe any
                                                        modifications
                                                        that have been
                                                        done here
                                                        ..."></textarea>
  </label>
  <br>
  <!-- Not yet implemented fields -->
<!--
  <label>
    Trades Considered?
    <input type="checkbox"
           name="fortrade"
           value="{{fortrade}}"
           class="toggle-fortrade"/>
  </label>
  <br>
  <label>
    Trade Looking For?
  <br>    
    <textarea name="tradelookingfor"
              class="tradelookingfor"
              value="{{tradelookingfor}}"
              placeholder="Description or key words that you're looking
                           for in trade"></textarea>
  </label>
  <br>
  <label>
    SKU
      <br>
    <input type="text" name="sku" value="{{sku}}" class="sku-input"/>
  </label>
  -->

</template>

<template name="newClassifiedForm">
  <form class="classified-fields">
    {{> classifiedFields}}
    <button class="save-button">Create</button>
  </form>
</template>

<template name="ClassifiedStub">
  <li>
    <div class="classified-stub">
      <h4>
        <a href="{{pathFor route='classified.show'}}">
          {{title}} - ${{asking}}
        </a>
      </h4>
      <img class="classified-stub-image" src="{{firstImage}}">
    </div>
  </li>
</template>

<!--Offer Templates-->

<template name="OfferNew">
  <form class="new-offer-form">
    <input type="number" name="amnt" value="{{amnt}}" placeholder="Offer Amount"/>
    <input type="text" name="msg" value="{{msg}}" placeholder="Message, be nice."/>
    <button class="new-offer-button">#dealwithit</button>
  </form>
</template>

<template name="OffersView">
  {{#each offersForClassi}}
  {{> OfferShow}}
  {{/each}}
</template>

<template name="OfferThread">
  {{#each offer}}
  offer
  {{/each}}
</template>

<template name="OfferThreads">
  {{#each thread}}
  offer exists
  {{/each}}
</template>

<template name="OfferShow">
  <div>
    {{#if isSender}}
    <h2>Offer from You of ${{amnt}}</h2>
    You Offered: {{amnt}} <br>
    You Said: {{msg}}<br>
    {{else}}
    <h2>Offer from {{createdByUname}} of ${{amnt}} </h2>
    Timestamp: {{createdAt}}<br>
    They Offered: {{amnt}}<br>
    They Said: {{msg}}<br>
    {{#if okToCounter}}
    <form class="counter-offer-form">
      <input type="number" name="amnt" value="{{amnt}}" placeholder="Offer Amount"/>
      <input type="text" name="msg" value="{{msg}}" placeholder="Message, be nice."/>
      <button class="make-counter-offer">How about...</button>
    </form>
    <button class="accept-offer-button">
      Deal!
    </button>
    {{/if}}
    {{/if}}

    Offer Status: {{status}}
  </div>
  <hr>
</template>

<template name="OfferSenderView">

</template>

<template name="OfferSellerView">
  Seller View Goes here
</template>
